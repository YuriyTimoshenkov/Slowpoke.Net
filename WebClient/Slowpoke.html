<html>
	<head>
		    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery-1.6.4.min.js"></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/jquery.signalR-2.2.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="http://localhost:8080/signalr/hubs"></script>
      <script type="text/javascript">
        $(function () 
        {
         	$.connection.hub.url = "http://localhost:8080/signalr";
        
			$.connection.hub.start().done(function() 
			{
	         	// Declare a proxy to reference the hub.
	            var gameProxy = $.connection.slowpokeHub;	

			    gameProxy.server.loadPlayer().done(function (player)

	            {
	            	$('#playerId').append(player.Id);

	            	setInterval(function() 
	            	{
		            	gameProxy.server.getActiveBodies(player.Id).done(function(bodies)
		            	{
		            		$('#activebodies').empty();

		            		bodies.forEach(function(element, index, array)
			            		{
			            			  $('#activebodies').append('<li><strong>Id:' + element.Id
	       						 + '</strong>, P.X' + element.Position.X 
	       						 + '</strong>, P.Y' + element.Position.Y + '<li>');
			            		});
		            	})
		            	.fail(function (error) {
					        console.log('Invocation of NewContosoChatMessage failed. Error: ' + error);
					    });
					}, 1000);
	            }).fail(function (error) {
				        console.log('Invocation of NewContosoChatMessage failed. Error: ' + error);
				    });

            });
        });
	  </script>
		<title></title>
	</head>
	<body>
	<div class="container">
		<b>PlayerId:</b><span id="playerId"></span>
        <ul id="activebodies"></ul>
    </div>
	</body>
</html>
